(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"57/v":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("zLVn"),a=n("mXGw"),c=n.n(a),r=n("xARA"),l=n("B23Y"),i=n.n(l),s=(n("u64D"),"undefined"!=typeof document?document:null),u=c.a.memo((function(e){var t,n,a=e.trapFocus,l=e.autoFocus,u=e.centered,m=e.size,d=e.fullscreen,p=e.onEscape,f=e.onBackdropDismiss,g=e.position,h=e.toggle,v=Object(o.a)(e,["trapFocus","autoFocus","centered","size","fullscreen","onEscape","onBackdropDismiss","position","toggle"]),b=c.a.useRef(),E=c.a.useState(!0),R=E[0],x=E[1];return c.a.useEffect((function(){h?(R&&x(!1),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open")}),[h]),c.a.useEffect((function(){function e(e){if("tab"===e.key.toLowerCase()){var t=Array.from(b.current.querySelectorAll("input, button, a")).filter((function(e){return"last-focusable-element"!==e.className}));t.length&&(e.shiftKey?("last-focusable-element"===document.activeElement.className&&b.current.contains(document.activeElement)||!b.current.contains(document.activeElement))&&t[t.length-1].focus():"last-focusable-element"===document.activeElement.className&&b.current.contains(document.activeElement)?b.current.querySelector("input, button, a").focus():b.current.contains(document.activeElement)||b.current.querySelector("input, button, a").focus())}}return a&&h?document.addEventListener("keyup",e):document.removeEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[a,h]),c.a.useEffect((function(){function e(e){"escape"===e.key.toLowerCase()&&p(e)}return p&&h?document.addEventListener("keyup",e):document.removeEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[p,h]),s?Object(r.createPortal)(c.a.createElement("div",Object.assign({},v,{className:i()("rc","modal",(t={show:h,hide:!h&&!R,"modal-centered":u,"modal-aside":g&&"default"!==g&&!d},t["modal-aside-"+[g]]=g&&"default"!==g&&!d,t["modal-fullscreen"]=d,t),v.className),role:v.role||"dialog",tabIndex:v.tabIndex||-1,"aria-modal":"true",onClick:function(e){v.onClick&&v.onClick(e);var t=e.target;f&&t.classList.contains("rc")&&t.classList.contains("modal")&&f(e)},onAnimationEnd:function(e){var t;(v.onAnimationEnd&&v.onAnimationEnd(e),d&&l&&h&&!b.current.contains(document.activeElement))&&(null===(t=b.current.querySelector("input"))||void 0===t||t.focus())}}),c.a.createElement("div",{ref:b,role:"document",className:i()("modal-dialog",(n={},n["modal-"+m]=m,n)),onAnimationEnd:function(){var e;l&&h&&!b.current.contains(document.activeElement)&&(null===(e=b.current.querySelector("input"))||void 0===e||e.focus())}},c.a.createElement("div",{className:"modal-content"},v.children),a&&c.a.createElement("a",{className:"last-focusable-element",href:"#"},c.a.createElement("div",{className:"sr-only"},"End of focus")))),s.body):null}))},E9pH:function(e,t){e.exports='import React from "react";\nimport classnames from "classnames";\nimport { Modal } from "../Modal";\nimport { ResizeHandle } from "./ResizeHandle";\nimport { ImagePicker } from "./ImagePicker";\nimport { moveHandler, readImage, resizeHandler, Position, addListener, crop } from "./utils";\nimport "./image-cropper.scss";\n\ninterface ImageCropperText {\n    select?: string;\n    cancel?: string;\n    crop?: string;\n}\n\nexport type ImageCropperProps = Omit<JSX.IntrinsicElements["div"], "onChange"> & {\n    /** The image value as string */\n    value?: string;\n    /** On change handler fired when image has been cropped or reset */\n    onChange?: (image: string) => void;\n    /** The size of the image cropper picker */\n    size?: number;\n    /** Texts used in the image cropper */\n    text?: ImageCropperText;\n};\n\nexport interface ClipRect {\n    top: number;\n    right: number;\n    bottom: number;\n    left: number;\n}\n\nexport const ImageCropper: React.FC<ImageCropperProps> = React.memo(({ onChange, value, size = 200, text, ...props }: ImageCropperProps) => {\n    const fileRef: React.MutableRefObject<HTMLInputElement> = React.useRef<HTMLInputElement>();\n    const imgRef: React.MutableRefObject<HTMLImageElement> = React.useRef<HTMLImageElement>();\n    const [modalToggle, setModalToggle] = React.useState<boolean>(false);\n    const [imgSrc, setImgSrc] = React.useState<string>();\n    const [croppedImgSrc, setCroppedImgSrc] = React.useState<string>(value);\n    const [pos, setPos] = React.useState<ClipRect>({ top: 0, left: 0, bottom: 180, right: 180 });\n\n    /** Handles selecting a file */\n    const handleInput = React.useCallback((event: React.FormEvent<HTMLInputElement>) => {\n        readImage(event)\n            .then((val: string) => {\n                setImgSrc(val);\n                setModalToggle(true);\n            })\n            .catch(console.error);\n    }, []);\n\n    /** Handles dragging the cropbox */\n    const handleMove = React.useCallback((event: React.MouseEvent | React.TouchEvent) => {\n        addListener(event, (ev) => {\n            moveHandler(ev, imgRef.current, setPos);\n        });\n    }, []);\n\n    /** Handles resizing the cropbox */\n    const handleResize = React.useCallback((event: React.MouseEvent | React.TouchEvent) => {\n        const position: Position = (event.target as HTMLElement).className.replace("handle", "").trim() as Position;\n\n        addListener(event, (e: MouseEvent | TouchEvent) => {\n            resizeHandler(e, position, imgRef.current, setPos);\n        });\n    }, []);\n\n    /** Handles cropping the image to the cropbox */\n    const handleCrop = () => {\n        crop(imgSrc, pos.left, pos.top, pos.right - pos.left, pos.bottom - pos.top, imgRef.current).then((img: string) => {\n            setModalToggle(false);\n            onChange && onChange(img);\n        });\n    };\n\n    /** Resets the image cropper */\n    const reset = React.useCallback(() => {\n        setCroppedImgSrc(null);\n        setImgSrc(null);\n        fileRef.current.value = fileRef.current.files = null;\n        onChange && onChange(null);\n    }, [props.onReset]);\n\n    React.useEffect(() => setCroppedImgSrc(value), [value]);\n\n    React.useEffect(() => {\n        modalToggle && setPos({ top: 0, left: 0, bottom: 180, right: 180 });\n    }, [modalToggle]);\n\n    return (\n        <div {...props} className={classnames("rc", "image-cropper", props.className)}>\n            <input type="file" accept="image/*" ref={fileRef} onInput={handleInput} hidden />\n\n            <ImagePicker\n                image={croppedImgSrc}\n                size={size}\n                onReset={reset}\n                onSelect={() => {\n                    fileRef.current.value = fileRef.current.files = null;\n                    fileRef.current.click();\n                }}\n            >\n                {text?.select}\n            </ImagePicker>\n\n            <Modal toggle={modalToggle} size="lg" className="image-cropper-modal">\n                <div className="modal-body">\n                    <div className="cropping-area">\n                        <img src={imgSrc} draggable={false} ref={imgRef} />\n                        <img\n                            className="crop-box"\n                            src={imgSrc}\n                            style={{ clip: `rect(${pos.top}px, ${pos.right}px, ${pos.bottom}px, ${pos.left}px)` }}\n                            draggable={false}\n                            onMouseDown={handleMove}\n                            onTouchStart={handleMove}\n                        />\n                        <ResizeHandle position="top-left" coordinates={pos} handleResize={handleResize} />\n                        <ResizeHandle position="top-right" coordinates={pos} handleResize={handleResize} />\n                        <ResizeHandle position="bottom-left" coordinates={pos} handleResize={handleResize} />\n                        <ResizeHandle position="bottom-right" coordinates={pos} handleResize={handleResize} />\n                    </div>\n                </div>\n                <div className="modal-footer">\n                    <div>\n                        <button className="btn btn-outline-primary cancel" onClick={() => setModalToggle(false)} type="button">\n                            {text?.cancel || "Cancel"}\n                        </button>\n                        <button className="btn btn-primary ml-3" onClick={handleCrop} type="button">\n                            {text?.crop || "Crop"}\n                        </button>\n                    </div>\n                </div>\n            </Modal>\n        </div>\n    );\n});\n'},HxuN:function(e,t,n){},aVwo:function(e,t,n){"use strict";n.r(t);var o=n("mXGw"),a=n.n(o),c=n("YfIq"),r=n("zLVn"),l=n("B23Y"),i=n.n(l),s=n("57/v"),u=function(e){var t,n=e.coordinates,o=e.position,c=e.handleResize,l=Object(r.a)(e,["coordinates","position","handleResize"]),s={top:o.includes("bottom")?n.bottom-10:n.top,left:o.includes("right")?n.right-10:n.left};return a.a.createElement("div",Object.assign({},l,{className:i()("handle",(t={},t[o]=o,t)),draggable:!1,onMouseDown:c,onTouchStart:c,style:s}))},m=function(e){return a.a.createElement("div",{className:"image-preview",style:{width:e.size,height:e.size}},a.a.createElement("div",{className:"preview"},e.image?a.a.createElement("img",{src:e.image,width:"100%"}):d,a.a.createElement("button",{type:"button",className:"select",onClick:e.onSelect},e.children||"Select image"),e.image&&a.a.createElement("button",{type:"button",className:"reset",onClick:e.onReset},"âœ•")))},d=a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"60",fill:"currentColor"},a.a.createElement("path",{fillRule:"evenodd",d:"M14.5 3h-13a.5.5 0 0 0-.5.5v9c0 .013 0 .027.002.04V12l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094L15 9.499V3.5a.5.5 0 0 0-.5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm4.502 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}));n("DQNa");var p={x:0,y:0};function f(e){var t=p.x,n=p.y;if(e.type.includes("touch")){var o=e;o.touches&&o.touches[0]&&(t=o.touches[0].screenX,n=o.touches[0].screenY)}else{var a=e;t=a.screenX,n=a.screenY}var c=p.x?t-p.x:0,r=p.y?n-p.y:0;return p={x:t,y:n},{movementX:c,movementY:r}}function g(e,t){var n,o=[];switch(e.type){case"mousedown":n="mousemove",o=["mouseup","mouseleave"];break;case"touchstart":n="touchmove",o=["touchend"]}function a(){document.removeEventListener(n,t),o.forEach((function(e){document["on"+e]=null,p={x:0,y:0}})),document.onkeyup=null}n&&(document.addEventListener(n,t),o.forEach((function(e){document["on"+e]=a})),document.onkeyup=function(e){"Escape"===e.key&&a()})}n("HxuN");var h=a.a.memo((function(e){var t=e.onChange,n=e.value,o=e.size,c=void 0===o?200:o,l=e.text,d=Object(r.a)(e,["onChange","value","size","text"]),p=a.a.useRef(),h=a.a.useRef(),v=a.a.useState(!1),b=v[0],E=v[1],R=a.a.useState(),x=R[0],y=R[1],C=a.a.useState(n),k=C[0],z=C[1],T=a.a.useState({top:0,left:0,bottom:180,right:180}),N=T[0],w=T[1],I=a.a.useCallback((function(e){(function(e){return new Promise((function(t,n){var o=e.target;if(o.value)if(o.files&&o.files[0]){var a=new FileReader;a.onload=function(e){t(e.target.result.toString())},a.readAsDataURL(o.files[0])}else n("No files found");else n("No value detected")}))})(e).then((function(e){y(e),E(!0)})).catch(console.error)}),[]),S=a.a.useCallback((function(e){g(e,(function(e){!function(e,t,n){var o=f(e),a=o.movementX,c=o.movementY;(a||c)&&n((function(e){var n=e.top+c,o=e.bottom+c,r=e.left+a,l=e.right+a,i=n>-1&&o<=t.clientHeight,s=r>-1&&l<=t.clientWidth;return{top:i?n:e.top,bottom:i?o:e.bottom,left:s?r:e.left,right:s?l:e.right}}))}(e,h.current,w)}))}),[]),L=a.a.useCallback((function(e){var t=e.target.className.replace("handle","").trim();g(e,(function(e){!function(e,t,n,o){var a,c=f(e),r=c.movementX,l=c.movementY;switch(t){case"top-right":o((function(e){return a=Object.assign({},e,{right:e.right+r,top:e.top-r}),a.right<=n.clientWidth&&a.top>=0&&a.bottom-a.top>=20&&a.right-a.left>=20?a:e}));break;case"top-left":o((function(e){return a=Object.assign({},e,{left:e.left+r,top:e.top+r}),a.left>=0&&a.top>=0&&a.bottom-a.top>=20&&a.right-a.left>=20?a:e}));break;case"bottom-left":o((function(e){return a=Object.assign({},e,{bottom:e.bottom+l,left:e.left-l}),a.left>=0&&a.bottom<=n.clientHeight&&a.bottom-a.top>=20&&a.right-a.left>=20?a:e}));break;case"bottom-right":o((function(e){return a=Object.assign({},e,{bottom:e.bottom+l,right:e.right+l}),a.right<=n.clientWidth&&a.bottom<=n.clientHeight&&a.bottom-a.top>=20&&a.right-a.left>=20?a:e}))}}(e,t,h.current,w)}))}),[]),H=a.a.useCallback((function(){z(null),y(null),p.current.value=p.current.files=null,t&&t(null)}),[d.onReset]);return a.a.useEffect((function(){return z(n)}),[n]),a.a.useEffect((function(){b&&w({top:0,left:0,bottom:180,right:180})}),[b]),a.a.createElement("div",Object.assign({},d,{className:i()("rc","image-cropper",d.className)}),a.a.createElement("input",{type:"file",accept:"image/*",ref:p,onInput:I,hidden:!0}),a.a.createElement(m,{image:k,size:c,onReset:H,onSelect:function(){p.current.value=p.current.files=null,p.current.click()}},null==l?void 0:l.select),a.a.createElement(s.a,{toggle:b,size:"lg",className:"image-cropper-modal"},a.a.createElement("div",{className:"modal-body"},a.a.createElement("div",{className:"cropping-area"},a.a.createElement("img",{src:x,draggable:!1,ref:h}),a.a.createElement("img",{className:"crop-box",src:x,style:{clip:"rect("+N.top+"px, "+N.right+"px, "+N.bottom+"px, "+N.left+"px)"},draggable:!1,onMouseDown:S,onTouchStart:S}),a.a.createElement(u,{position:"top-left",coordinates:N,handleResize:L}),a.a.createElement(u,{position:"top-right",coordinates:N,handleResize:L}),a.a.createElement(u,{position:"bottom-left",coordinates:N,handleResize:L}),a.a.createElement(u,{position:"bottom-right",coordinates:N,handleResize:L}))),a.a.createElement("div",{className:"modal-footer"},a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn-outline-primary cancel",onClick:function(){return E(!1)},type:"button"},(null==l?void 0:l.cancel)||"Cancel"),a.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(){var e,n,o,a,c,r;(e=x,n=N.left,o=N.top,a=N.right-N.left,c=N.bottom-N.top,r=h.current,new Promise((function(t){var l=new Image;l.onload=function(){var e=document.createElement("canvas"),i=Math.min(r.width,r.height);e.width=e.height=i;var s=l.width/r.width,u=l.height/r.height;e.getContext("2d").drawImage(l,n*s,o*u,a*s,c*u,0,0,i,i),t(e.toDataURL())},l.src=e}))).then((function(e){E(!1),t&&t(e)}))},type:"button"},(null==l?void 0:l.crop)||"Crop")))))})),v=n("gFaW"),b=n("E9pH");t.default=function(){var e=a.a.useState(""),t=e[0],n=e[1],o=Object(v.a)([{key:"controls",items:[{key:"size",label:"Size",description:"The size of the image cropper picker in pixels",controlType:"Text",value:200},{key:"selectText",label:"Select text",description:"The text used for selecting an image",controlType:"Text",value:""},{key:"cropText",label:"Crop text",description:"The text used for crop action",controlType:"Text",value:""},{key:"cancelText",label:"Cancel text",description:"The text used to cancel the crop",controlType:"Text",value:""}]}]),r=o[0],l=o[1].controls;return a.a.createElement(c.a,{mainFile:b,example:a.a.createElement("div",{className:"d-flex flex-column align-items-center mx-auto"},a.a.createElement(h,{value:t,onChange:n,size:parseInt(null==l?void 0:l.size)||200,text:{select:null==l?void 0:l.selectText,crop:null==l?void 0:l.cropText,cancel:null==l?void 0:l.cancelText}})),code:"<ImageCropper value={image} onChange={setImage} />",controls:r()})}},u64D:function(e,t,n){}}]);
//# sourceMappingURL=component---src-pages-docs-imagecropper-tsx-4a0aca32504129916d9e.js.map