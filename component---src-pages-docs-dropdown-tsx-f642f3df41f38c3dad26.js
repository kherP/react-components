(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{qKbY:function(e,n,t){"use strict";t.r(n);var l=t("KQm4"),o=t("mXGw"),a=t.n(o),r=t("YfIq"),s=t("qu2C"),i=t("gFaW"),c=t("6YaK"),p=t("vFOZ"),u=["Malaysia","China","Japan","Singapore","Iraq","Kuwait","Iran","Jordan","Slovenia","Germany","France","Spain","Nicaragua","Ecuador","Brazil","Argentina","Guinea","Nigeria","Morocco","Tanzania"],d=["Asia","Middle east","Europe","South America","Africa"];n.default=function(){var e=a.a.useState(),n=e[0],t=e[1],o=a.a.useState([]),h=o[0],m=o[1],f=a.a.useState([]),g=f[0],v=f[1],w=Object(i.a)([{key:"controls",items:[{key:"multiple",label:"multiple",controlType:"Checkbox",value:!1},{key:"searchable",label:"searchable",controlType:"Checkbox",value:!1},{key:"clearable",label:"clearable",controlType:"Checkbox",value:!1},{key:"disabled",label:"disabled",controlType:"Checkbox",value:!1},{key:"useGroups",label:"Render in groups",description:"Wrap dropdown items with optgroup to group them",controlType:"Checkbox",value:!1},{key:"useDividers",label:"Add dividers",description:"Dividers are added using div with className dropdown-divider",controlType:"Checkbox",value:!1}]}]),b=w[0],y=w[1].controls;return a.a.useEffect((function(){var e=[];if(y.useGroups){var n=[];u.forEach((function(t,o){n.push(a.a.createElement("option",{key:"item-"+o,value:t},t)),Math.round((o+1)/4)===(o+1)/4&&(e.push(a.a.createElement("optgroup",{key:"group-"+o,label:d[Math.floor(o/4)]},Object(l.a)(n))),y.useDividers&&e.push(a.a.createElement("div",{key:"divider-"+o,className:"dropdown-divider"})),n=[])}))}else u.forEach((function(n,t){e.push(a.a.createElement("option",{key:"item-"+t,value:n},n)),y.useDividers&&Math.round((t+1)/4)===(t+1)/4&&e.push(a.a.createElement("div",{key:"divider-"+t,className:"dropdown-divider"}))}));v(e)}),[y.useGroups,y.useDividers]),a.a.createElement(r.a,{mainFile:p,example:a.a.createElement("div",{className:"w-100"},a.a.createElement(s.a,{value:y.multiple?h:n,onChange:y.multiple?null:function(e){return t(e.target.value)},onMultipleChange:m,placeholder:"Select...",multiple:y.multiple,searchable:y.searchable,clearable:y.clearable,disabled:y.disabled},g)),code:'<Dropdown value={value} onChange={e => setValue(e.target.value)}>\n    <option value="first">First</option>\n    <option value="Second">Second</option>\n    <option value="third">Third</option>\n</Dropdown>',controls:b(),note:a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"Select multiple"),a.a.createElement("p",null,"The native select element exposes APIs similar to an HTML input element. Passing a value and retrieving a value from the element using the change event is all the same. However, if you are using the dropdown with ",a.a.createElement("code",null,"multiple")," enabled, the native APIs will change. To get a list of the selected options in a multi-select element, you need to do the following:"),a.a.createElement(c.a,{language:"typescript"},"function changeHandler(event: React.ChangeEvent<HTMLSelectElement>): void {\n    const selectedOptions: string[] = Array.from(event.target.options)\n        .filter((option) => option.selected)\n        .map((option) => option.value);\n    \n    setValue(selectedOptions);\n}"),a.a.createElement("p",null,"This might not be as convenient to work with as the rest of the elements, therefore, we have provided 2 ways of simplifying this interaction"),a.a.createElement("ol",null,a.a.createElement("li",null,"Using ",a.a.createElement("code",null,"onMultipleChange"),":"),a.a.createElement("p",null,"Dropdown component allows you to pass your setter function to ",a.a.createElement("code",null,"onMultipleChange")," directly which returns an array of selected options like this:"),a.a.createElement(c.a,{language:"jsx"},'<Dropdown value={value} onMultipleChange={setValue} multiple>\n    <option value="1">First</option>\n    <option value="2">Second</option>\n    <option value="3">Third</option>\n    <option value="4">Fourth</option>\n</Dropdown>'),a.a.createElement("br",null),a.a.createElement("li",null,"Using ",a.a.createElement("code",null,"getValueOfMultipleSelect")),a.a.createElement("p",null,"We also exported a method ",a.a.createElement("code",null,"getValueOfMultipleSelect")," for you to use that will just do the extraction of the values for you. This is especially useful if you have a generic ",a.a.createElement("code",null,"changeHandler")," method. For example:"),a.a.createElement(c.a,{language:"typescript"},'function genericChangeHandler(event: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>): void {\n    if (event.target.multiple) { // Dropdowns\n        setValue(getValueOfMultipleSelect(event.target));\n    } else if (event.target.type === "checkbox") { // Checkboxes\n        setValue(event.target.checked);\n    } else { // Everything else\n        setValue(event.target.value);\n    }\n}')))})}},vFOZ:function(e,n){e.exports='import React from "react";\nimport { createPortal } from "react-dom";\nimport classnames from "classnames";\nimport { useCombinedRefs } from "../hooks";\nimport { CloseButton } from "../CloseButton";\nimport { CustomDropdownItem } from "./CustomDropdownItem";\nimport { randomId } from "@sebgroup/frontend-tools";\nimport "./dropdown.scss";\n\nexport interface DropdownText {\n    selectAll?: string;\n    noResult?: string;\n    emptyList?: string;\n    search?: string;\n}\n\nconst defaultText: Required<DropdownText> = {\n    selectAll: "Select all",\n    emptyList: "List is empty",\n    noResult: "No result",\n    search: "Search...",\n};\n\nexport function getValueOfMultipleSelect(select: HTMLSelectElement): string[] {\n    return Array.from(select.options)\n        .filter((option) => option.selected)\n        .map((option) => option.value);\n}\n\n// This solution is meant to fix Gatsby build which complains that document and window doesn\'t exist in server-side rendering\nconst safeDocument: Document | null = typeof document !== "undefined" ? document : null;\nconst safeWindow: Window | null = typeof window !== "undefined" ? window : null;\n\nexport type DropdownProps = Omit<JSX.IntrinsicElements["select"], "value"> & {\n    /** Props for the select\'s wrapper (div) */\n    wrapperProps?: JSX.IntrinsicElements["div"];\n    /** The value of the dropdown */\n    value?: string | string[];\n    /** An event triggered when a select of type multiple is changed returning an array of the selected values */\n    onMultipleChange?: (selected: string[]) => void;\n    /** Allows searching throw the dropdown */\n    searchable?: boolean;\n    /** Allows clearing the dropdown with a clear button */\n    clearable?: boolean;\n    /** Custom texts to be dispalyed in different parts of the dropdown */\n    text?: DropdownText;\n};\n\nexport const Dropdown: React.FC<DropdownProps> = React.forwardRef(({ wrapperProps = {}, text = {}, onMultipleChange, searchable, clearable, ...props }: DropdownProps, ref) => {\n    const [toggleId] = React.useState<string>(randomId("ddt-"));\n    const [selectAllId] = React.useState<string>(randomId("sa-"));\n    const [show, setShow] = React.useState<boolean>(false);\n    const [allSelected, setAllSelected] = React.useState<boolean>(false);\n    const [searchKeyword, setSearchKeyword] = React.useState<string>("");\n    const [menuStyle, setMenuStyle] = React.useState<React.CSSProperties>({});\n    const [label, setLabel] = React.useState<string>();\n\n    const selectRef = useCombinedRefs<HTMLSelectElement>(ref);\n    const searchRef = React.useRef<HTMLInputElement>();\n    const menuRef = React.useRef<HTMLDivElement>();\n    const dropdownRef = React.useRef<HTMLDivElement>();\n\n    const isMobile: boolean = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(safeWindow?.navigator?.userAgent);\n\n    const handleChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            if (props.multiple) {\n                const current = Array.from(selectRef.current.options).find((option) => option.value == e.target.value);\n                current.selected = !current.selected;\n            } else {\n                selectRef.current.value = e.target.value;\n                setShow(false);\n            }\n            selectRef.current.dispatchEvent(new Event("change", { bubbles: true }));\n            props.multiple && onMultipleChange && onMultipleChange(getValueOfMultipleSelect(selectRef.current));\n        },\n        [isMobile, props.multiple, onMultipleChange]\n    );\n\n    const selectAll = (forceValue?: boolean | React.ChangeEvent<HTMLInputElement>) => {\n        Array.from(selectRef.current.options).forEach((option) => {\n            option.selected = typeof forceValue === "boolean" ? forceValue : !allSelected;\n        });\n        typeof forceValue === "boolean" && (selectRef.current.value = "");\n        selectRef.current.dispatchEvent(new Event("change", { bubbles: true }));\n        setAllSelected(!allSelected);\n        props.multiple && onMultipleChange && onMultipleChange(getValueOfMultipleSelect(selectRef.current));\n    };\n\n    const toggleMenu = React.useCallback(\n        (event: React.MouseEvent<HTMLButtonElement>) => {\n            if (show) {\n                setShow(false);\n            } else {\n                const rect = event.currentTarget.getBoundingClientRect();\n                const top: number = rect.top + rect.height;\n                const left: number = rect.left;\n                const bottom: number = window.innerHeight - rect.y + 4;\n                const minWidth: number = rect.width;\n                if (window.innerHeight - top < 200) {\n                    setMenuStyle({ minWidth, bottom, left, maxHeight: rect.y - 10 });\n                } else {\n                    setMenuStyle({ minWidth, top, left, maxHeight: window.innerHeight - top - 12 });\n                }\n                setShow(true);\n            }\n        },\n        [show]\n    );\n\n    const onChange = React.useCallback(\n        (event: React.ChangeEvent<HTMLSelectElement>) => {\n            props.multiple && onMultipleChange && onMultipleChange(getValueOfMultipleSelect(event.target));\n            props.onChange && props.onChange(event);\n        },\n        [props.multiple, props.onChange, onMultipleChange]\n    );\n\n    /** TODO: Can be extracted to a component */\n    const getOptions = () => {\n        const list = React.Children.map(props.children, (Child) => {\n            if (!React.isValidElement(Child)) {\n                return Child;\n            } else {\n                const type: string = (Child.type as any)?.name || Child.type;\n                const filteredBySearch = (element: React.ReactElement<any>): boolean => {\n                    if (searchKeyword) {\n                        if (React.isValidElement<any>(element)) {\n                            const keyword: string = searchKeyword.toLowerCase().trim();\n                            const text: string = String(element.props?.children).toLowerCase().trim();\n                            return text.indexOf(keyword) < 0;\n                        } else {\n                            return true;\n                        }\n                    }\n                    return false;\n                };\n                /** Radio buttons should be grouped with a name */\n                const name: string = props.multiple ? null : toggleId;\n                switch (type) {\n                    case "option":\n                        return filteredBySearch(Child) ? null : (\n                            <CustomDropdownItem\n                                multiple={props.multiple}\n                                name={name}\n                                value={Child.props.value}\n                                checked={Array.isArray(props.value) ? props.value.includes(Child.props.value) : props.value == Child.props.value}\n                                onChange={handleChange}\n                            >\n                                {Child.props.children}\n                            </CustomDropdownItem>\n                        );\n                    case "optgroup":\n                        const label = <label className="optgroup-label">{Child.props?.label}</label>;\n                        return [\n                            searchKeyword ? null : label,\n                            ...React.Children.toArray(Child.props.children).map((groupChild: React.ReactElement<any>) => {\n                                return filteredBySearch(groupChild) ? null : (\n                                    <CustomDropdownItem\n                                        multiple={props.multiple}\n                                        name={name}\n                                        value={groupChild.props.value}\n                                        checked={Array.isArray(props.value) ? props.value.includes(groupChild.props.value) : props.value == groupChild.props.value}\n                                        onChange={handleChange}\n                                    >\n                                        {groupChild.props.children}\n                                    </CustomDropdownItem>\n                                );\n                            }),\n                        ];\n                    default:\n                        return searchKeyword ? null : Child;\n                }\n            }\n        });\n        return list?.length ? list : searchKeyword ? <p>{text.noResult || defaultText.noResult}</p> : <p>{text.emptyList || defaultText.emptyList}</p>;\n    };\n\n    React.useEffect(() => {\n        !isMobile && props.multiple && setAllSelected(Array.from(selectRef.current.options).every((option) => option.selected));\n    }, [props.value]);\n\n    React.useEffect(() => {\n        if (!isMobile) {\n            const detectBlur = (event: MouseEvent) => {\n                if (!dropdownRef.current.contains(event.target as any) && !menuRef.current.contains(event.target as any)) {\n                    setShow(false);\n                }\n            };\n            const handleScroll = (event: WheelEvent): void => {\n                if (!menuRef.current.contains(event.target as any)) {\n                    setShow(false);\n                }\n            };\n\n            if (show) {\n                searchRef.current?.focus();\n                document.addEventListener("click", detectBlur);\n                window.addEventListener("wheel", handleScroll);\n            } else {\n                document.removeEventListener("click", detectBlur);\n                window.removeEventListener("wheel", handleScroll);\n            }\n\n            return () => {\n                document.removeEventListener("click", detectBlur);\n                window.removeEventListener("wheel", handleScroll);\n            };\n        }\n    }, [show]);\n\n    React.useEffect(() => {\n        !isMobile && setLabel((Array.isArray(props.value) ? props.value.join(", ") : props.value) || props.placeholder);\n    }, [props.value, props.placeholder]);\n\n    return (\n        <div {...wrapperProps} className={classnames("rc custom-dropdown", wrapperProps.className)}>\n            {!isMobile && (\n                <div className={classnames("dropdown", { show, clearable })} ref={dropdownRef}>\n                    <button\n                        className="btn btn-secondary dropdown-toggle"\n                        type="button"\n                        id={toggleId}\n                        data-toggle="dropdown"\n                        aria-haspopup="true"\n                        aria-expanded="false"\n                        onClick={toggleMenu}\n                        disabled={props.disabled}\n                    >\n                        <span>{label}</span>\n                    </button>\n                    {clearable && <CloseButton onClick={() => selectAll(false)} disabled={props.disabled} />}\n                    {!safeDocument\n                        ? null\n                        : createPortal(\n                              <div className={classnames("rc dropdown-menu", { show })} aria-labelledby={toggleId} ref={menuRef} style={{ ...menuStyle }}>\n                                  {searchable && (\n                                      <input\n                                          className="form-control"\n                                          type="search"\n                                          placeholder={text.search || defaultText.search}\n                                          value={searchKeyword}\n                                          onChange={(e) => setSearchKeyword(e.target.value)}\n                                          ref={searchRef}\n                                      />\n                                  )}\n                                  {/* Select all button */}\n                                  {props.multiple && !searchKeyword ? (\n                                      React.Children.count(props.children) ? (\n                                          <>\n                                              <div className="custom-control custom-checkbox select-all">\n                                                  <input id={selectAllId} name="inline" type="checkbox" className="custom-control-input" checked={allSelected} hidden onChange={selectAll} />\n                                                  <label className="custom-control-label" htmlFor={selectAllId}>\n                                                      {text.selectAll || defaultText.selectAll}\n                                                  </label>\n                                              </div>\n                                              <div className="dropdown-divider" />\n                                          </>\n                                      ) : (\n                                          text.emptyList || defaultText.emptyList\n                                      )\n                                  ) : null}\n\n                                  {getOptions()}\n                              </div>,\n                              safeDocument.body\n                          )}\n                </div>\n            )}\n            <select {...props} ref={selectRef} onChange={onChange} className={classnames("custom-select", props.className)} hidden={!isMobile}>\n                {/* select always picks the first item by default. Therefore the first needs to be initialized here */}\n                {!props.value && (\n                    <option disabled value="" hidden>\n                        {props.placeholder}\n                    </option>\n                )}\n                {React.Children.toArray(props.children).filter((Child: any) => ["option", "optgroup"].includes(Child.type))}\n            </select>\n            {clearable && isMobile && <CloseButton onClick={() => selectAll(false)} disabled={props.disabled} />}\n        </div>\n    );\n});\n'}}]);
//# sourceMappingURL=component---src-pages-docs-dropdown-tsx-f642f3df41f38c3dad26.js.map